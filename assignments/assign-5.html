<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amanda Yang">
<meta name="dcterms.date" content="2024-10-09">

<title>Assignment 5: Analysis of WDI Dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="assign-5_files/libs/clipboard/clipboard.min.js"></script>
<script src="assign-5_files/libs/quarto-html/quarto.js"></script>
<script src="assign-5_files/libs/quarto-html/popper.min.js"></script>
<script src="assign-5_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assign-5_files/libs/quarto-html/anchor.min.js"></script>
<link href="assign-5_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assign-5_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assign-5_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assign-5_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assign-5_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="assign-5.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 5: Analysis of WDI Dataset</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amanda Yang </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="c07e21d9" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'wdi.csv'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          country  inflation_rate  exports_gdp_share  gdp_growth_rate  \
0     Afghanistan             NaN          18.380042        -6.240172   
1         Albania        6.725203          37.395422         4.856402   
2         Algeria        9.265516          31.446856         3.600000   
3  American Samoa             NaN          46.957520         1.735016   
4         Andorra             NaN                NaN         9.563798   

   gdp_per_capita  adult_literacy_rate  primary_school_enrolment_rate  \
0      352.603733                  NaN                            NaN   
1     6810.114041                 98.5                      95.606712   
2     5023.252932                  NaN                     108.343933   
3    19673.390102                  NaN                            NaN   
4    42350.697069                  NaN                      90.147346   

   education_expenditure_gdp_share  measles_immunisation_rate  \
0                              NaN                       68.0   
1                          2.74931                       86.0   
2                              NaN                       79.0   
3                              NaN                        NaN   
4                          2.66623                       98.0   

   health_expenditure_gdp_share  income_inequality  unemployment_rate  \
0                           NaN                NaN             14.100   
1                           NaN                NaN             11.588   
2                           NaN                NaN             12.437   
3                           NaN                NaN                NaN   
4                           NaN                NaN                NaN   

   life_expectancy  total_population  
0           62.879        41128771.0  
1           76.833         2777689.0  
2           77.129        44903225.0  
3              NaN           44273.0  
4              NaN           79824.0  </code></pre>
</div>
</div>
<p>The wdi.csv dataset was sourced from the World Development Indicators dataset. My analysis of this is further supported by the following datasets: the <a href="https://www.who.int/data/gho/data/themes/mortality-and-global-health-estimates/ghe-life-expectancy-and-healthy-life-expectancy">World Health Organization</a> <span class="citation" data-cites="who2023">World Health Organization (<a href="#ref-who2023" role="doc-biblioref">2023</a>)</span>, the <a href="https://www.imf.org/external/datamapper/LUR@WEO/OEMDC/ADVEC/WEOWORLD">International Monetary Fund</a> <span class="citation" data-cites="imf2023">International Monetary Fund (<a href="#ref-imf2023" role="doc-biblioref">2023</a>)</span>.</p>
<div id="cell-tab-summary-statistics" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'gdp_per_capita'</span>, <span class="st">'life_expectancy'</span>, <span class="st">'unemployment_rate'</span>]].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/yangziyu/opt/anaconda3/lib/python3.9/site-packages/IPython/core/formatters.py:343: FutureWarning:

In future versions `DataFrame.to_latex` is expected to utilise the base implementation of `Styler.to_latex` for formatting and rendering. The arguments signature may therefore change. It is recommended instead to use `DataFrame.style.to_latex` which also contains additional functionality.
</code></pre>
</div>
<div id="tab-summary-statistics" class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gdp_per_capita</th>
<th data-quarto-table-cell-role="th">life_expectancy</th>
<th data-quarto-table-cell-role="th">unemployment_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>203.000000</td>
<td>209.000000</td>
<td>186.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>20345.707649</td>
<td>72.416519</td>
<td>7.268661</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>31308.942225</td>
<td>7.713322</td>
<td>5.827726</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>259.025031</td>
<td>52.997000</td>
<td>0.130000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>2570.563284</td>
<td>66.782000</td>
<td>3.500750</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>7587.588173</td>
<td>73.514634</td>
<td>5.537500</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>25982.630050</td>
<td>78.475000</td>
<td>9.455250</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>240862.182448</td>
<td>85.377000</td>
<td>37.852000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Table <span class="citation" data-cites="tbl:tab-summary-statistics">(<a href="#ref-tbl:tab-summary-statistics" role="doc-biblioref"><strong>tbl:tab-summary-statistics?</strong></a>)</span> summarizes the key statistics for GDP per capita, life expectancy, and unemployment rate.</p>
<p>The summary statistics of GDP per capita, life expectancy, and unemployment rate highlight significant disparities across countries. The GDP per capita has a wide range, from $259 to over $240,000, with an average of $20,345 and a high standard deviation of $31,309, indicating large economic inequality between countries. The 75th percentile is $25,982, showing that only 25% of countries have higher economic output per person.</p>
<p>Life expectancy is relatively more consistent, with an average of 72.42 years and a narrower range between 53 and 85 years. The median life expectancy is 73.51 years, suggesting that most countries fall within a typical range for longevity.</p>
<p>In contrast, the unemployment rate shows significant variation, with a mean of 7.27% and a standard deviation of 5.83%. The lowest unemployment rate is 0.13%, while the highest reaches 37.85%, reflecting considerable differences in labor market conditions. The 75th percentile is 9.46%, indicating that in 25% of countries, unemployment is a major issue.</p>
<section id="visualizations-of-key-indicators" class="level1">
<h1>Visualizations of Key Indicators</h1>
<section id="bar-chart-gdp-per-capita-across-countries" class="level2">
<h2 class="anchored" data-anchor-id="bar-chart-gdp-per-capita-across-countries">1. Bar Chart: GDP per Capita Across Countries</h2>
<p>Below is a bar chart showing the GDP per capita for all countries.</p>
<div id="cell-fig-gdp-bar-chart" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div id="fig-gdp-bar-chart" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Bar chart of GDP per capita for all countries.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gdp-bar-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="assign-5_files/figure-html/fig-gdp-bar-chart-output-1.png" alt="Bar chart of GDP per capita for all countries." width="687" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gdp-bar-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Bar chart showing the GDP per capita for all countries. Data from WDI.
</figcaption>
</figure>
</div>
</div>
</div>
<p>As shown in Figure <a href="#fig-gdp-bar-chart" class="quarto-xref">Figure&nbsp;1</a>, the distribution of GDP per capita is heavily skewed to the right, with most countries having a relatively low GDP per capita. A few countries have very high GDP per capita values, as seen from the long tail of the distribution.</p>
</section>
<section id="scatterplot-life-expectancy-vs.-gdp-per-capita" class="level2">
<h2 class="anchored" data-anchor-id="scatterplot-life-expectancy-vs.-gdp-per-capita">2. Scatterplot: Life Expectancy vs.&nbsp;GDP Per Capita</h2>
<p>Below is a scatterplot showing the relationship between life expectancy and GDP per capita.</p>
<div id="cell-fig-life-exp-scatterplot" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<div id="fig-life-exp-scatterplot" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Scatter plot of life expectancy vs. GDP per capita for all countries.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-life-exp-scatterplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="assign-5_files/figure-html/fig-life-exp-scatterplot-output-1.png" alt="Scatter plot of life expectancy vs. GDP per capita for all countries." width="659" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-life-exp-scatterplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Scatter plot showing the relationship between life expectancy and GDP per capita. Data from WDI.
</figcaption>
</figure>
</div>
</div>
</div>
<p>As shown in the Figure <a href="#fig-life-exp-scatterplot" class="quarto-xref">Figure&nbsp;2</a>, there is a positive correlation between life expectancy and GDP per capita. Countries with higher GDP per capita tend to have higher life expectancies. However, this relationship flattens as GDP per capita increases, suggesting diminishing returns on life expectancy beyond a certain level of GDP per capita, corresponding to the life expectancy level among developing states in the world today.</p>
</section>
<section id="barplot-unemployment-across-countries" class="level2">
<h2 class="anchored" data-anchor-id="barplot-unemployment-across-countries">3. Barplot: Unemployment across countries</h2>
<p>Below is a barplot showing the distribution of the unemployment rate of all countries.</p>
<div id="cell-fig-unemp-bar" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div id="fig-unemp-bar" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Barplot of the distribution of the unemployment rate of all countries.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemp-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="assign-5_files/figure-html/fig-unemp-bar-output-1.png" alt="Barplot of the distribution of the unemployment rate of all countries." width="659" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemp-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Barplot showing the distribution of the unemployment rate of all countries. Data from WDI.
</figcaption>
</figure>
</div>
</div>
</div>
<p>As shown in the Figure <a href="#fig-unemp-bar" class="quarto-xref">Figure&nbsp;3</a>, the unemployment rate distribution shows that most countries have an unemployment rate between 0% and 15%. A smaller number of countries have higher unemployment rates, with a few exceeding 25%. The data is right-skewed.</p>
</section>
<section id="below-is-a-table-that-highlights-some-key-statistics-from-my-analysis-on-gdp-per-capita-life-expectancy-and-unemployment." class="level2">
<h2 class="anchored" data-anchor-id="below-is-a-table-that-highlights-some-key-statistics-from-my-analysis-on-gdp-per-capita-life-expectancy-and-unemployment.">Below is a table that highlights some key statistics from my analysis on GDP per capita, life expectancy and unemployment.</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 12%">
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Indicator</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Max</th>
<th style="text-align: right;">Median (50%)</th>
<th style="text-align: right;">Std Dev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">GDP per Capita</td>
<td style="text-align: right;">20,345.71</td>
<td style="text-align: right;">259.03</td>
<td style="text-align: right;">240,862.18</td>
<td style="text-align: right;">7,587.59</td>
<td style="text-align: right;">31,308.94</td>
</tr>
<tr class="even">
<td style="text-align: left;">Life Expectancy</td>
<td style="text-align: right;">72.42</td>
<td style="text-align: right;">52.99</td>
<td style="text-align: right;">85.38</td>
<td style="text-align: right;">73.51</td>
<td style="text-align: right;">7.71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Unemployment Rate</td>
<td style="text-align: right;">7.27</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">5.54</td>
<td style="text-align: right;">5.83</td>
</tr>
</tbody>
</table>
</section>
<section id="references" class="level2 unnumbered">


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-imf2023" class="csl-entry" role="listitem">
International Monetary Fund. 2023. <span>“Unemployment Rates by Country.”</span> <a href="https://www.imf.org/external/datamapper/LUR@WEO/OEMDC/ADVEC/WEOWORLD">https://www.imf.org/external/datamapper/LUR@WEO/OEMDC/ADVEC/WEOWORLD</a>.
</div>
<div id="ref-who2023" class="csl-entry" role="listitem">
World Health Organization. 2023. <span>“Life Expectancy and Healthy Life Expectancy.”</span> <a href="https://www.who.int/data/gho/data/themes/mortality-and-global-health-estimates/ghe-life-expectancy-and-healthy-life-expectancy">https://www.who.int/data/gho/data/themes/mortality-and-global-health-estimates/ghe-life-expectancy-and-healthy-life-expectancy</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>